<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TPM Daily Study</title>
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignal.SDK.js" defer></script>
    <script>
      window.OneSignalLayer = window.OneSignalLayer || [];
      OneSignalLayer.push(function(OneSignal) {
        OneSignal.init({ appId: "59d80b8a-8d13-49d5-82b9-915280ac56f8" });
      });
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 text-slate-900 font-sans">
    <div class="max-w-2xl mx-auto px-4 py-12">
        <header class="text-center mb-10">
            <h1 class="text-3xl font-extrabold text-slate-800">Daily TPM Navigator</h1>
            <p id="date-display" class="text-slate-500 mt-2 font-medium"></p>
        </header>

        <main id="content-card" class="bg-white rounded-3xl shadow-xl p-8 border border-slate-100">
            <div class="inline-block px-3 py-1 rounded-full bg-blue-100 text-blue-600 text-xs font-bold uppercase tracking-wider mb-4">Today's Topic</div>
            <h2 id="topic-title" class="text-2xl font-bold mb-4 text-slate-800 tracking-tight">불러오는 중...</h2>
            <div id="topic-content" class="text-slate-600 leading-relaxed space-y-4 text-lg"></div>
        </main>

        <footer class="mt-12 text-center">
            <div id="onesignal-bell-container" class="inline-block"></div>
        </footer>
    </div>

    <script>
        document.getElementById('date-display').innerText = new Date().toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' });

        fetch('topics.json')
            .then(res => res.json())
            .then(data => {
                const today = new Date();
                const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / 86400000);
                const item = data[dayOfYear % data.length];

                document.getElementById('topic-title').innerText = item.topic;
                document.getElementById('topic-content').innerHTML = item.content.split('\n').map(line => `<p>${line}</p>`).join('');
            });
    </script>
</body>
</html>