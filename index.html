<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily TPM Study</title>
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignal.SDK.js" defer></script>
    <script>
      window.OneSignalLayer = window.OneSignalLayer || [];
      OneSignalLayer.push(function(OneSignal) {
        OneSignal.init({
          appId: "59d80b8a-8d13-49d5-82b9-915280ac56f8",
        });
      });
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
    <div class="bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center">
        <h1 class="text-2xl font-bold mb-2">오늘의 TPM 공부</h1>
        <div id="date" class="text-blue-500 text-sm mb-6"></div>
        <div id="topic" class="text-xl font-semibold mb-4">불러오는 중...</div>
        <p id="content" class="text-gray-600 mb-8"></p>
        <div id="onesignal-bell-container"></div>
    </div>

    <script>
        document.getElementById('date').innerText = new Date().toLocaleDateString();
        fetch('topics.json')
            .then(res => res.json())
            .then(data => {
                const today = new Date();
                const start = new Date(today.getFullYear(), 0, 0);
                const diff = today - start;
                const oneDay = 1000 * 60 * 60 * 24;
                const dayOfYear = Math.floor(diff / oneDay);
                
                const todayStudy = data[dayOfYear % data.length];
                document.getElementById('topic').innerText = todayStudy.topic;
                document.getElementById('content').innerText = todayStudy.content;
            });
    </script>
</body>
</html>